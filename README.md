# æ›´æ–°
2025.12.30 ä¿®å¤é¢˜ç›®å‡ºç°htmlå…ƒç´ æ ¼å¼é—®é¢˜ã€‚ <br />
2026.01.04 1.è‡ªå®šä¹‰èƒŒæ™¯å›¾ç‰‡æ·»åŠ æ‡’åŠ è½½æ¨¡å¼ï¼Œåˆ†ç»„åŠ è½½ç­‰ã€‚
           2.æ–°å¢æš—é»‘ä¸»é¢˜ã€‚
           3.æ–°å¢é”™é¢˜æœ¬ã€‚
           4.ä¼˜åŒ–åŠ è½½é€Ÿåº¦ï¼Œæ¸…é™¤å¢ƒå¤–cdnï¼Œå›½å†…ç½‘ç»œä½¿ç”¨ä¹Ÿèƒ½èµ·é£ï¼

# åœ¨çº¿ç­”é¢˜ç³»ç»Ÿ

ä¸€ä¸ªåŠŸèƒ½å®Œå–„çš„åœ¨çº¿ç­”é¢˜ç³»ç»Ÿï¼Œæ”¯æŒ Word æ–‡æ¡£å¯¼å…¥ã€AI æ™ºèƒ½è§£æã€åœ¨çº¿ç­”é¢˜ã€é¢˜ç›®è§£æç­‰åŠŸèƒ½ã€‚

## åŠŸèƒ½ç‰¹æ€§

### é¢˜ç›®ç®¡ç†
- **å¤šç§å¯¼å…¥æ–¹å¼**
  - Word æ–‡æ¡£ä¸Šä¼ ï¼ˆ.docx æ ¼å¼ï¼‰
  - JSON æ ¼å¼æ‰¹é‡å¯¼å…¥
  - æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼è§£æå’Œ AI æ™ºèƒ½è§£æä¸¤ç§æ¨¡å¼

- **æ™ºèƒ½é¢˜ç›®è§£æ**
  - **æ­£åˆ™æ¨¡å¼**ï¼šå¿«é€Ÿè§£ææ ‡å‡†æ ¼å¼çš„ Word æ–‡æ¡£
  - **AI æ¨¡å¼**ï¼šä½¿ç”¨ç¡…åŸºæµåŠ¨ AI æ¨¡å‹æ·±åº¦è§£æï¼Œæ”¯æŒå¤æ‚æ ¼å¼å’Œæ··åˆé¢˜å‹
  - è‡ªåŠ¨è¯†åˆ«é¢˜å‹ï¼šå•é€‰é¢˜ã€å¤šé€‰é¢˜ã€åˆ¤æ–­é¢˜ã€ç®€ç­”é¢˜
  - è‡ªåŠ¨æå–é¢˜å¹²ã€é€‰é¡¹ã€ç­”æ¡ˆå’Œè§£æ

- **é¢˜ç›®å­˜å‚¨**
  - MySQL æ•°æ®åº“å­˜å‚¨
  - æ”¯æŒè¯•å·åˆ†ç±»ç®¡ç†
  - è‡ªåŠ¨è®°å½•ä¸Šä¼ è€…å’Œåˆ›å»ºæ—¶é—´

### ç­”é¢˜åŠŸèƒ½
- **åœ¨çº¿ç­”é¢˜**
  - ç¾è§‚çš„ç­”é¢˜ç•Œé¢
  - æ”¯æŒå•é€‰é¢˜ã€å¤šé€‰é¢˜ã€åˆ¤æ–­é¢˜ã€ç®€ç­”é¢˜
  - å®æ—¶æ˜¾ç¤ºç­”é¢˜è¿›åº¦
  - ç­”é¢˜å¡å¿«é€Ÿè·³è½¬

- **æ™ºèƒ½è§£æ**
  - AI è‡ªåŠ¨è§£æé¢˜ç›®
  - è¯¦ç»†çš„çŸ¥è¯†ç‚¹è®²è§£
  - é”™è¯¯ç­”æ¡ˆåˆ†æ
  - ä¸ªæ€§åŒ–å­¦ä¹ å»ºè®®

### ç•Œé¢å®šåˆ¶
- **èƒŒæ™¯å›¾ç‰‡**
  - æ”¯æŒè‡ªå®šä¹‰èƒŒæ™¯å›¾ç‰‡ä¸Šä¼ 
  - å¤šç§å›¾ç‰‡æ ¼å¼æ”¯æŒï¼ˆjpg, jpeg, png, gif, webpï¼‰
  - ç»ç’ƒæ¨¡ç³Šæ•ˆæœï¼ˆæ¯›ç»ç’ƒï¼‰
  - èƒŒæ™¯å›¾ç‰‡ç®¡ç†

- **ç°ä»£åŒ– UI**
  - å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒç§»åŠ¨ç«¯
  - æ¸å˜è‰²å½©æ–¹æ¡ˆ
  - æµç•…çš„åŠ¨ç”»æ•ˆæœ
  - å‹å¥½çš„ç”¨æˆ·ä½“éªŒ

### æ•°æ®ç®¡ç†
- **è¯•å·åˆ—è¡¨**
  - æ˜¾ç¤ºæ‰€æœ‰è¯•å·
  - æ˜¾ç¤ºé¢˜ç›®æ•°é‡
  - æŒ‰åˆ›å»ºæ—¶é—´æ’åº

- **é¢˜ç›®æŸ¥çœ‹**
  - æŒ‰è¯•å·æŸ¥çœ‹é¢˜ç›®
  - é¢˜ç›®è¯¦æƒ…å±•ç¤º
  - æ”¯æŒé¢˜ç›®æœç´¢å’Œç­›é€‰

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 14.0.0
- MySQL >= 5.7
- npm æˆ– yarn

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
```bash
git clone https://github.com/yxy3635/online_test
cd onlineTest
```

2. **å®‰è£…ä¾èµ–**
```bash
npm install
```

3. **é…ç½®æ•°æ®åº“**

ç¼–è¾‘ `lib/db.js` æ–‡ä»¶ï¼Œä¿®æ”¹æ•°æ®åº“è¿æ¥é…ç½®ï¼š

```javascript
const dbConfig = {
    host: 'localhost',        // æ•°æ®åº“ä¸»æœºåœ°å€
    user: 'root',             // æ•°æ®åº“ç”¨æˆ·å
    password: 'your_password', // æ•°æ®åº“å¯†ç   
    database: 'online_test',  // æ•°æ®åº“åç§°
    waitForConnections: true,
    connectionLimit: 10,
    queueLimit: 0
};
```

4. **åˆ›å»ºæ•°æ®åº“**

åœ¨ MySQL ä¸­åˆ›å»ºæ•°æ®åº“ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰ï¼š
```sql
CREATE DATABASE IF NOT EXISTS online_test CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

5. **é…ç½®ç¡…åŸºæµåŠ¨ API**

ç¼–è¾‘ `lib/aiParser.js` æ–‡ä»¶ï¼Œä¿®æ”¹ AI é…ç½®ï¼š

```javascript
const AI_CONFIG = {
    provider: 'siliconflow', 
    siliconflow: {
        apiKey: 'sk-your-api-key-here',  // è¯·æ›¿æ¢ä¸ºæ‚¨çš„å®é™… API Key
        
        apiUrl: 'api.siliconflow.cn',
        apiPath: '/v1/chat/completions',
        
        // ä½¿ç”¨çš„æ¨¡å‹ï¼ˆå¯æ ¹æ®éœ€è¦ä¿®æ”¹ï¼‰
        model: 'Qwen/Qwen2.5-Coder-7B-Instruct' 
    }
};
```

**è·å–ç¡…åŸºæµåŠ¨ API Keyï¼š**
1. è®¿é—® [ç¡…åŸºæµåŠ¨å®˜ç½‘](https://siliconflow.cn/)
2. æ³¨å†Œ/ç™»å½•è´¦å·
3. åœ¨æ§åˆ¶å°è·å– API Key
4. å°† API Key å¡«å…¥é…ç½®æ–‡ä»¶ä¸­

6. **å¯åŠ¨æœåŠ¡**

```bash
npm start
```

### å¯é€‰é…ç½®é¡¹

#### æœåŠ¡å™¨ç«¯å£ (`server.js`)

é»˜è®¤ç«¯å£ä¸º 3000ï¼Œå¦‚éœ€ä¿®æ”¹ï¼š

```javascript
const port = 3000;  
```

#### æ–‡ä»¶ä¸Šä¼ é™åˆ¶ (`server.js`)

```javascript
limits: { fileSize: 64 * 1024 * 1024 }  // 64MBï¼Œå¯æ ¹æ®éœ€è¦è°ƒæ•´
```

## ä½¿ç”¨æŒ‡å—

### å¯¼å…¥é¢˜ç›®

#### æ–¹å¼ä¸€ï¼šWord æ–‡æ¡£ä¸Šä¼ 

1. ç‚¹å‡»"ä¸Šä¼ é¢˜ç›®"æŒ‰é’®
2. é€‰æ‹© Word æ–‡æ¡£ï¼ˆ.docx æ ¼å¼ï¼‰
3. å¡«å†™ç§‘ç›®åç§°å’Œä¸Šä¼ è€…å§“å
4. é€‰æ‹©è§£ææ¨¡å¼ï¼š
   - **æ­£åˆ™æ¨¡å¼**ï¼šå¿«é€Ÿè§£æï¼Œé€‚åˆæ ‡å‡†æ ¼å¼
   - **AI æ¨¡å¼**ï¼šæ™ºèƒ½è§£æï¼Œé€‚åˆå¤æ‚æ ¼å¼ï¼ˆéœ€è¦é…ç½® API Keyï¼‰
5. ç­‰å¾…è§£æå®Œæˆ

#### æ–¹å¼äºŒï¼šJSON æ ¼å¼å¯¼å…¥

1. å‡†å¤‡ JSON æ ¼å¼çš„é¢˜ç›®æ•°æ®ï¼š

```json
{
  "uploader": "å¼ ä¸‰",
  "subject": "è®¡ç®—æœºåŸºç¡€",
  "questions": [
    {
      "title": "HTMLæ˜¯ä»€ä¹ˆï¼Ÿ",
      "type": "å•é€‰é¢˜",
      "options": [
        {"label": "A", "content": "è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€"},
        {"label": "B", "content": "ç¼–ç¨‹è¯­è¨€"}
      ],
      "answer": "A",
      "explanation": "HTMLæ˜¯è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€"
    }
  ]
}
```

2. é€šè¿‡ API æ¥å£å¯¼å…¥ï¼š
```bash
POST /api/upload/json
Content-Type: application/json

{
  "uploader": "å¼ ä¸‰",
  "subject": "è®¡ç®—æœºåŸºç¡€",
  "questions": [...]
}
```

### ç­”é¢˜æµç¨‹

1. åœ¨é¦–é¡µé€‰æ‹©è¯•å·
2. è¿›å…¥ç­”é¢˜ç•Œé¢
3. é€‰æ‹©ç­”æ¡ˆï¼ˆæ”¯æŒå•é€‰ã€å¤šé€‰ã€åˆ¤æ–­ã€ç®€ç­”ï¼‰
4. ç‚¹å‡»"æäº¤ç­”æ¡ˆ"æŸ¥çœ‹ç»“æœ
5. ç‚¹å‡»"AI è§£æ"è·å–è¯¦ç»†è§£æ

### èƒŒæ™¯å›¾ç‰‡è®¾ç½®

1. ç‚¹å‡»å³ä¸Šè§’è®¾ç½®æŒ‰é’®
2. é€‰æ‹©"èƒŒæ™¯è®¾ç½®"
3. ä¸Šä¼ èƒŒæ™¯å›¾ç‰‡æˆ–é€‰æ‹©å·²æœ‰å›¾ç‰‡
4. å›¾ç‰‡ä¼šè‡ªåŠ¨åº”ç”¨ä¸ºé¡µé¢èƒŒæ™¯

## API æ¥å£

### è¯•å·ç›¸å…³

- `GET /api/exams` - è·å–æ‰€æœ‰è¯•å·åˆ—è¡¨
- `GET /api/questions?exam_id=123` - è·å–æŒ‡å®šè¯•å·çš„é¢˜ç›®

### ä¸Šä¼ ç›¸å…³

- `POST /api/upload` - ä¸Šä¼  Word æ–‡æ¡£ï¼ˆæ­£åˆ™è§£æï¼‰
- `POST /api/upload/ai` - ä¸Šä¼  Word æ–‡æ¡£ï¼ˆAI è§£æï¼Œæµå¼è¿”å›ï¼‰
- `POST /api/upload/json` - JSON æ ¼å¼å¯¼å…¥é¢˜ç›®

### å…¶ä»–

- `POST /api/ask-ai` - è¯·æ±‚ AI è§£æå•é“é¢˜ç›®

## é¡¹ç›®ç»“æ„

```
onlineTest/
â”œâ”€â”€ lib/                    # æ ¸å¿ƒåº“æ–‡ä»¶
â”‚   â”œâ”€â”€ db.js              # æ•°æ®åº“é…ç½®å’Œåˆå§‹åŒ–
â”‚   â”œâ”€â”€ aiParser.js        # AI è§£æå™¨ï¼ˆç¡…åŸºæµåŠ¨ï¼‰
â”‚   â””â”€â”€ wordParser.js      # Word æ–‡æ¡£è§£æå™¨ï¼ˆæ­£åˆ™ï¼‰
â”œâ”€â”€ public/                 # å‰ç«¯é™æ€æ–‡ä»¶
â”‚   â””â”€â”€ index.html         # ä¸»é¡µé¢
â”œâ”€â”€ uploads/                # ä¸Šä¼ æ–‡ä»¶ç›®å½•
â”‚   â””â”€â”€ ...                # èƒŒæ™¯å›¾ç‰‡ç­‰
â”œâ”€â”€ server.js               # Express æœåŠ¡å™¨
â”œâ”€â”€ package.json           # é¡¹ç›®é…ç½®
â””â”€â”€ README.md              
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **åç«¯**
  - Node.js + Express
  - MySQL2ï¼ˆæ•°æ®åº“ï¼‰
  - Multerï¼ˆæ–‡ä»¶ä¸Šä¼ ï¼‰
  - Mammothï¼ˆWord æ–‡æ¡£è§£æï¼‰

- **å‰ç«¯**
  - åŸç”Ÿ HTML/CSS/JavaScript
  - å“åº”å¼è®¾è®¡

- **AI æœåŠ¡**
  - ç¡…åŸºæµåŠ¨ï¼ˆSiliconFlowï¼‰

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

GPL-2.0 license




